<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<!--    namespace对应Mapper接口名                -->
<mapper namespace="mybatistest.mapper.BookMapper">
	<select id="findOne" resultMap="bookDetails">
		select 
		  b.ID BOOK_ID, b.TITLE BOOK_TITLE, b.DESCRIPTION BOOK_DESCRIPTION,
		  p.ID PUBLISHER_ID, p.NAME PUBLISHER_NAME, p.DESCRIPTION PUBLISHER_DESCRIPTION
		 from BOOKS b 
		  inner join PUBLISHERS p on b.PUBLISHER_ID = p.ID 
		 where b.ID = #{id} 		
	</select>
	
	<resultMap type="Book" id="bookDetails">
<!-- 	映射结果集时，主键列用id，非主键列用result -->
<!-- 	处理的是BOOKS表 -->
		<id column="BOOK_ID" property="id"/>
		<result column="BOOK_TITLE" property="title"/>
		<result column="BOOK_DESCRIPTION" property="description"/>
<!-- 	对一关系 -->
		<association property="publisher" javaType="Publisher">
<!-- 		处理的是PUBLISHERS表 -->
			<id column="PUBLISHER_ID" property="id"/>
			<result column="PUBLISHER_NAME" property="name"/>
			<result column="PUBLISHER_DESCRIPTION" property="description"/>
		</association>
	</resultMap>
</mapper>